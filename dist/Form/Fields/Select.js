import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import React,{useState,useEffect}from"react";import{FormGroup,Button,MenuItem}from"@blueprintjs/core";import{Select}from"@blueprintjs/select";import{useSelector,useDispatch}from"react-redux";export default function SelectField(a){function b(a,b){w({type:"UPDATE_FIELD",field:b,value:l(a)})}var c=a.label,d=a.name,e=a.helper,f=a.info,g=a.data,h=a.placeholder,i=g.url,j=g.filterBy,k=g.text,l=g.id,m=g.middleware,n=useState(g.items||[]),o=_slicedToArray(n,2),p=o[0],q=o[1],r=useState(!1),s=_slicedToArray(r,2),t=s[0],u=s[1],v="select-field-".concat(d),w=useDispatch(),x=useSelector(function(a){return a.validator.get(d)}),y=x?"danger":"none",z=useSelector(function(a){return p.find(function(b){return l(b)===a.form.get(d)})});return useEffect(function(){i&&(u(!0),requestData(i).then(function(a){return m(a)}).then(function(a){q(a),u(!1)}))},[i,m]),React.createElement(FormGroup,{intent:y,helperText:x?x:e,label:c,labelFor:v,labelInfo:f},React.createElement(Select,{id:v,items:p,itemRenderer:function itemRenderer(a){var c=l(a)===l(z);return React.createElement(MenuItem,{active:c,icon:c&&"small-tick",key:l(a),text:k(a),intent:"none",onClick:function onClick(){return b(a,d)}})},itemPredicate:function itemPredicate(a,b){return filterItems(a,b,j)}},React.createElement(Button,{text:z?k(z):h,rightIcon:"double-caret-vertical",intent:y,loading:t})))}function filterItems(a,b,c){return c.some(function(c){return b[c].toLowerCase().includes(a.toLowerCase())})}function requestData(a){return fetch(a).then(function(a){return a.json()})}