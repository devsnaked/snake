import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import React,{useState,useEffect}from"react";import{FormGroup,MenuItem}from"@blueprintjs/core";import{MultiSelect}from"@blueprintjs/select";import{useSelector,useDispatch}from"react-redux";import{List}from"immutable";export default function SelectField(a){function b(a){s({type:"UPDATE_FIELD_LIST_VALUE",field:d,value:l(a)})}var c=a.label,d=a.name,e=a.helper,f=a.info,g=a.data,h=a.placeholder,i=g.url,j=g.filterBy,k=g.text,l=g.id,m=g.middleware,n=useState(g.items||[]),o=_slicedToArray(n,2),p=o[0],q=o[1],r="select-field-".concat(d),s=useDispatch(),t=useSelector(function(a){return a.validator.get(d)}),u=t?"danger":"none",v=useSelector(function(a){var b=a.form.get(d)||new List;return p.filter(function(a){return b.includes(l(a))})}),w=useSelector(function(a){return a.form.get(d)||new List});return useEffect(function(){i&&requestData(i).then(function(a){return m(a)}).then(function(a){q(a)})},[i,m]),React.createElement(FormGroup,{intent:u,helperText:t?t:e,label:c,labelFor:r,labelInfo:f},React.createElement(MultiSelect,{id:r,items:p,placeholder:h,fill:!0,onItemSelect:console.log,selectedItems:v,itemRenderer:function itemRenderer(a){var c=w.includes(l(a));return React.createElement(MenuItem,{active:c,icon:c&&"small-tick",key:l(a),text:k(a),onClick:function onClick(c){b(a),c.preventDefault()}})},itemPredicate:function itemPredicate(a,b){return filterItems(a,b,j)},tagRenderer:function tagRenderer(a){return k(a)},tagInputProps:{tagProps:{minimal:!0,onRemove:function onRemove(a,c){b(v[c["data-tag-index"]]),a.stopPropagation()}}}}))}function filterItems(a,b,c){return c.some(function(c){return b[c].toLowerCase().includes(a.toLowerCase())})}function requestData(a){return fetch(a).then(function(a){return a.json()})}